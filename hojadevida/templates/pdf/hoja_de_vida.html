{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Hoja de Vida - {{ perfil.nombre_completo }}</title>

    <!-- BASE para que WeasyPrint resuelva im√°genes y CSS -->
    <base href="{{ css_url|cut:'css/hoja_de_vida.css' }}">

    <!-- CSS PRINCIPAL -->
    <link rel="stylesheet" href="{{ css_url }}">

    <style>
        body {
            font-family: 'Roboto', Arial, Helvetica, sans-serif;
        }
    </style>
</head>
<body>

<!-- ===================== CV PRINCIPAL ===================== -->
<div class="cv-container">

    <!-- ========== COLUMNA IZQUIERDA ========== -->
    <aside class="sidebar">

        <div class="foto-container">
            {% if perfil.foto_perfil %}
                <img src="{{ perfil.foto_perfil.url }}" class="foto-perfil">
            {% endif %}
        </div>

        {% if perfil %}
        <section class="sidebar-section">
            <h2 class="sidebar-title">Informaci√≥n Personal</h2>
            <ul class="info-personal-bullets">
                {% if perfil.nombres or perfil.apellidos %}
                <li><strong>Nombres y Apellidos:</strong><br>{{ perfil.nombres }} {{ perfil.apellidos }}</li>
                {% endif %}
                {% if perfil.nacionalidad %}
                <li><strong>Nacionalidad:</strong><br>{{ perfil.nacionalidad }}</li>
                {% endif %}
                {% if perfil.fechanacimiento %}
                <li><strong>Fecha de nacimiento:</strong><br>{{ perfil.fechanacimiento }}</li>
                {% endif %}
                {% if perfil.lugarnacimiento %}
                <li><strong>Lugar de nacimiento:</strong><br>{{ perfil.lugarnacimiento }}</li>
                {% endif %}
                {% if perfil.sexo %}
                <li><strong>Sexo:</strong><br>{{ perfil.get_sexo_display }}</li>
                {% endif %}
                {% if perfil.estadocivil %}
                <li><strong>Estado civil:</strong><br>{{ perfil.estadocivil }}</li>
                {% endif %}
            </ul>
        </section>

        <section class="sidebar-section">
            <h2 class="sidebar-title">Contacto</h2>
            <ul class="info-personal">
                {% if perfil.telefonoconvencional %}
                <li class="contact-item"><div class="icon-circle">üì±</div><span>{{ perfil.telefonoconvencional }}</span></li>
                {% endif %}
                {% if perfil.sitioweb %}
                <li class="contact-item"><div class="icon-circle">üåê</div><span>{{ perfil.sitioweb }}</span></li>
                {% endif %}
                {% if perfil.email %}
                <li class="contact-item"><div class="icon-circle">‚úâÔ∏è</div><span>{{ perfil.email }}</span></li>
                {% endif %}
            </ul>
        </section>
        {% endif %}
    </aside>

    <!-- ========== COLUMNA DERECHA ========== -->
    <main class="main-content">

        {% if perfil %}
        <header class="header-right">
            <h1>{{ perfil.nombre_completo|upper }}</h1>
            {% if perfil.descripcionperfil %}
            <div class="bio">
                <h2>Perfil Profesional</h2>
                <p>{{ perfil.descripcionperfil }}</p>
            </div>
            {% endif %}
        </header>
        {% endif %}

        <!-- ================= EXPERIENCIA ================= -->
        {% if experiencias %}
        <section class="section-main">
            <h2 class="main-title">Experiencia Laboral</h2>
            {% for exp in experiencias %}
            <div class="timeline-item">
                <p class="puesto">{{ exp.puesto }}</p>
                <p>{{ exp.descripcion }}</p>
            </div>
            {% endfor %}
        </section>
        {% endif %}

        <!-- ================= CURSOS ================= -->
        {% if cursos %}
        <section class="section-main">
            <h2 class="main-title">Cursos</h2>
            {% for curso in cursos %}
            <div class="timeline-item">
                <p class="curso-nombre">{{ curso.nombre }}</p>
                <p>{{ curso.descripcion }}</p>
            </div>
            {% endfor %}
        </section>
        {% endif %}

        <!-- ================= RECONOCIMIENTOS ================= -->
        {% if reconocimientos %}
        <section class="section-main">
            <h2 class="main-title">Reconocimientos</h2>
            {% for rec in reconocimientos %}
            <div class="timeline-item">
                <p>{{ rec.nombre }}</p>
            </div>
            {% endfor %}
        </section>
        {% endif %}

        <!-- ================= PRODUCTOS ACAD√âMICOS ================= -->
        {% if productos_academicos %}
        <section class="productos-academicos">
            <h2 class="main-title">Productos Acad√©micos</h2>
            {% for prod in productos_academicos %}
            <div class="producto-fila">
                <div class="producto-texto">{{ prod.descripcion }}</div>
                {% if prod.imagen %}
                <div class="producto-imagen">
                    <img src="{{ prod.imagen.url }}">
                </div>
                {% endif %}
            </div>
            {% endfor %}
        </section>
        {% endif %}

        <!-- ================= PRODUCTOS LABORALES ================= -->
        {% if productos_laborales %}
        <section class="productos-laborales">
            <h2 class="main-title">Productos Laborales</h2>
            {% for prod in productos_laborales %}
            <div class="producto-laboral-fila">
                <div class="producto-texto">{{ prod.descripcion }}</div>
            </div>
            {% endfor %}
        </section>
        {% endif %}

    </main>
</div>


































<!-- ===================== PORTADA CERTIFICADOS ===================== -->
<div style="page-break-before: always; text-align:center; font-size:42px; font-weight:bold; margin-top:120mm;">
    CERTIFICADOS
</div>



<!-- ===================== CERTIFICADOS ===================== -->
{% for exp in certificados_experiencias %}
    {% if exp.imagen_certificado %}
    <div style="page-break-before: always; padding:15mm;">
        <img src="{{ exp.imagen_certificado.url }}" style="width:100%;height:100%;object-fit:contain;">
    </div>
    {% endif %}
{% endfor %}

{% for rec in certificados_reconocimientos %}
    {% if rec.imagen_certificado %}
    <div style="page-break-before: always; padding:15mm;">
        <img src="{{ rec.imagen_certificado.url }}" style="width:100%;height:100%;object-fit:contain;">
    </div>
    {% endif %}
{% endfor %}

{% for curso in certificados_cursos %}
    {% if curso.imagen_certificado %}
    <div style="page-break-before: always; padding:15mm;">
        <img src="{{ curso.imagen_certificado.url }}" style="width:100%;height:100%;object-fit:contain;">
    </div>
    {% endif %}
{% endfor %}



</body>
</html>
