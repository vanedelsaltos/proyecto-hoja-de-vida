{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Hoja de Vida - {{ perfil.nombre_completo }}</title>
    <base href="{{ css_url|cut:'css/hoja_de_vida.css' }}">
    <link rel="stylesheet" href="{{ css_url }}">
    <style>
        body { font-family: 'Roboto', Arial, sans-serif; -webkit-print-color-adjust: exact; margin: 0; padding: 0; }
        .cv-container { display: flex; min-height: 100vh; width: 100%; }
        
        /* Lateral Izquierdo */
        .sidebar { width: 32%; background-color: #a3867a; color: white; padding: 30px 20px; }
        .sidebar-title { background: rgba(255,255,255,0.2); padding: 5px 10px; font-size: 1.1em; text-transform: uppercase; margin-top: 25px; }
        .info-list { list-style: none; padding: 0; margin: 15px 0; }
        .info-list li { margin-bottom: 12px; font-size: 0.9em; line-height: 1.4; }
        .contact-item { display: flex; align-items: flex-start; margin-bottom: 15px; }
        .icon { background: white; color: #a3867a; border-radius: 50%; width: 24px; height: 24px; 
                display: flex; align-items: center; justify-content: center; margin-right: 10px; flex-shrink: 0; font-size: 14px; }

        /* Contenido Derecho */
        .main-content { width: 68%; background-color: white; padding: 40px; }
        .header-name { font-size: 2.8em; color: #333; margin: 0; border-bottom: 4px solid #a3867a; display: inline-block; }
        .section-title { color: #a3867a; border-bottom: 1px solid #eee; padding-bottom: 5px; margin-top: 30px; text-transform: uppercase; letter-spacing: 1px; }
        
        /* Dise√±o de Experiencia y Cursos */
        .item-container { margin-bottom: 20px; padding-left: 15px; border-left: 2px solid #a3867a; position: relative; }
        .item-container::before { content: ""; position: absolute; left: -7px; top: 5px; width: 12px; height: 12px; background: #a3867a; border-radius: 50%; }
        .item-title { font-weight: bold; font-size: 1.1em; color: #333; margin: 0; }
        .item-subtitle { color: #666; font-weight: bold; margin: 2px 0; }
        .item-date { font-style: italic; color: #888; font-size: 0.85em; margin-bottom: 5px; }
        
        img.foto-perfil { width: 160px; height: 160px; border-radius: 50%; border: 4px solid white; object-fit: cover; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .producto-img { width: 100%; max-width: 200px; border-radius: 8px; border: 1px solid #ddd; }
    </style>
</head>
<body>

<div class="cv-container">
    <aside class="sidebar">
        <div style="text-align:center; margin-bottom:30px;">
            {% if perfil.foto_perfil %}<img src="{{ perfil.foto_perfil.url }}" class="foto-perfil">{% endif %}
        </div>

        <h2 class="sidebar-title">Informaci√≥n Personal</h2>
        <ul class="info-list">
            <li><strong>Nombres:</strong><br>{{ perfil.nombres }} {{ perfil.apellidos }}</li>
            <li><strong>Nacionalidad:</strong><br>{{ perfil.nacionalidad }}</li>
            <li><strong>Fecha de Nacimiento:</strong><br>{{ perfil.fechanacimiento }}</li>
            <li><strong>Lugar:</strong><br>{{ perfil.lugarnacimiento }}</li>
            <li><strong>Estado Civil:</strong><br>{{ perfil.estadocivil }}</li>
        </ul>

        <h2 class="sidebar-title">Contacto</h2>
        <div class="contact-item">
            <div class="icon">üì±</div>
            <div><strong>Tel√©fono:</strong><br>{{ perfil.telefonoconvencional }}</div>
        </div>
        {% if perfil.sitioweb %}
        <div class="contact-item">
            <div class="icon">üåê</div>
            <div><strong>Web:</strong><br><span style="font-size:0.8em; word-break: break-all;">{{ perfil.sitioweb }}</span></div>
        </div>
        {% endif %}
        <div class="contact-item">
            <div class="icon">ü™™</div>
            <div><strong>C√©dula:</strong><br>{{ perfil.numerocedula }}</div>
        </div>
    </aside>

    <main class="main-content">
        <header>
            <h1 class="header-name">{{ perfil.nombre_completo|upper }}</h1>
            <h3 style="color: #666; margin-top: 15px;">Perfil Profesional</h3>
            <p style="line-height: 1.6; color: #444;">{{ perfil.descripcionperfil }}</p>
        </header>

        {% if experiencias %}
        <h2 class="section-title">Experiencia Laboral</h2>
        {% for exp in experiencias %}
        <div class="item-container">
            <p class="item-title">{{ exp.cargo_desempenado }}</p>
            <p class="item-subtitle">{{ exp.nombre_empresa }} | {{ exp.lugar_empresa }}</p>
            <p class="item-date">{{ exp.fecha_inicio_gestion }} - {% if exp.fecha_fin_gestion %}{{ exp.fecha_fin_gestion }}{% else %}Actualidad{% endif %}</p>
            <p style="font-size: 0.9em;">{{ exp.descripcion_funciones }}</p>
        </div>
        {% endfor %}
        {% endif %}

        {% if cursos %}
        <h2 class="section-title">Cursos Realizados</h2>
        {% for curso in cursos %}
        <div class="item-container">
            <p class="item-title">{{ curso.nombrecurso }}</p>
            <p class="item-subtitle">{{ curso.entidadpatrocinadora }} ({{ curso.totalhoras }} Horas)</p>
            <p class="item-date">{{ curso.fechainicio }} - {{ curso.fechafin }}</p>
        </div>
        {% endfor %}
        {% endif %}

        {% if productos_academicos %}
        <h2 class="section-title">Productos Acad√©micos</h2>
        {% for prod in productos_academicos %}
        <div style="display:flex; gap:20px; margin-top:15px; background: #f9f9f9; padding: 15px; border-radius: 8px;">
            <div style="flex:2;">
                <p style="font-weight:bold; margin:0;">{{ prod.nombrerecurso }}</p>
                <p style="font-size:0.85em; color:#555;">{{ prod.descripcion }}</p>
            </div>
            {% if prod.imagen %}
            <div style="flex:1;"><img src="{{ prod.imagen.url }}" class="producto-img"></div>
            {% endif %}
        </div>
        {% endfor %}
        {% endif %}
    </main>
</div>

</body>
</html>

<!-- ===================== PORTADA CERTIFICADOS ===================== -->
<div style="page-break-before: always; text-align:center; font-size:42px; font-weight:bold; margin-top:120mm;">
    CERTIFICADOS
</div>



<!-- ===================== CERTIFICADOS ===================== -->
{% for exp in certificados_experiencias %}
    {% if exp.imagen_certificado %}
    <div style="page-break-before: always; padding:15mm;">
        <img src="{{ exp.imagen_certificado.url }}" style="width:100%;height:100%;object-fit:contain;">
    </div>
    {% endif %}
{% endfor %}

{% for rec in certificados_reconocimientos %}
    {% if rec.imagen_certificado %}
    <div style="page-break-before: always; padding:15mm;">
        <img src="{{ rec.imagen_certificado.url }}" style="width:100%;height:100%;object-fit:contain;">
    </div>
    {% endif %}
{% endfor %}

{% for curso in certificados_cursos %}
    {% if curso.imagen_certificado %}
    <div style="page-break-before: always; padding:15mm;">
        <img src="{{ curso.imagen_certificado.url }}" style="width:100%;height:100%;object-fit:contain;">
    </div>
    {% endif %}
{% endfor %}



</body>
</html>
