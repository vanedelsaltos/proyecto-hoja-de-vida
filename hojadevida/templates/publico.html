{% extends "base_publico.html" %}

{% block content %}

<!-- =======================
     PESTA√ëA DE INICIO
======================= -->
<div id="inicio" class="tab-content active">
    <div class="intro-container">
        
        <h1 class="intro-title">Bienvenido/a</h1>
        <div class="intro-separator"></div>

        {% if perfil.texto_inicio %}
            <p class="intro-subtitle">{{ perfil.texto_inicio|linebreaks }}</p>
        {% else %}
            <p class="intro-subtitle">
                Explora mi experiencia profesional, cursos y proyectos en esta hoja de vida digital.
            </p>
        {% endif %}

        <div class="intro-buttons" style="margin-top: 1.5rem;">
            <a href="{% url 'imprimir_hoja_de_vida' %}" target="_blank" class="btn-pdf">
                üñ® Imprimir Hoja de Vida
            </a>
            <a href="#datos" class="btn-vermas" onclick="mostrarTab('datos')">Ver m√°s</a>
        </div>

    </div>
</div>

<!-- =======================
     DATOS PERSONALES
======================= -->
<div id="datos" class="tab-content">
    <div class="resume-grid">
        
        <aside class="resume-sidebar">
            {% if perfil.foto_perfil %}
                <div class="perfil-foto-container">
                    <img src="{{ perfil.foto_perfil.url }}" alt="Foto de perfil" class="perfil-foto-cv">
                </div>
            {% endif %}

            <h2 class="section-title-sm">Contacto</h2>
            
            <div class="contact-box">
                {% if perfil.lugarnacimiento %}
                <div class="contact-item">
                    <span class="icon">üìç</span>
                    <p><strong>Ubicaci√≥n</strong><br>{{ perfil.lugarnacimiento }}</p>
                </div>
                {% endif %}

                {% if perfil.telefonoconvencional or perfil.telefonofijo %}
                <div class="contact-item">
                    <span class="icon">üì±</span>
                    <p><strong>Tel√©fono</strong><br>
                        {% if perfil.telefonoconvencional %}
                            {{ perfil.telefonoconvencional }}
                        {% endif %}
                        {% if perfil.telefonoconvencional and perfil.telefonofijo %}
                            <br>
                        {% endif %}
                        {% if perfil.telefonofijo %}
                            {{ perfil.telefonofijo }}
                        {% endif %}
                    </p>
                </div>
                {% endif %}


                {% if perfil.sitioweb %}
                <div class="contact-item">
                    <span class="icon">üåê</span>
                    <p><strong>Sitio Web</strong><br><a href="{{ perfil.sitioweb }}" target="_blank" class="cv-link">Visitar sitio</a></p>
                </div>
                {% endif %}

                <div class="contact-item">
                    <span class="icon">ü™™</span>
                    <p><strong>Identificaci√≥n</strong><br>{{ perfil.numerocedula }}</p>
                </div>

                <div class="contact-item">
                    <span class="icon">üöó</span>
                    <p><strong>Licencia</strong><br>{{ perfil.licenciaconducir|default:"No dispone" }}</p>
                </div>
            </div>
        </aside>

        <main class="resume-main">
            <h1 class="cv-name">{{ perfil.nombres }} {{ perfil.apellidos }}</h1>
            
            <span class="perfil-tag-bubble">{{ perfil.get_perfilactivo_display }}</span>

            <div class="cv-section" style="margin-top: 20px;">
                <div class="cv-text">
                    {{ perfil.descripcionperfil|linebreaks|default:"Persona apasionada y enfocada en el desarrollo profesional." }}
                </div>
            </div>

            <div class="cv-section">
                <h3 class="cv-section-title">Detalles Personales</h3>
                <div class="cv-info-grid">
                    <p><strong>Nacionalidad:</strong> {{ perfil.nacionalidad }}</p>
                    <p><strong>Nacimiento:</strong> {{ perfil.fechanacimiento|date:"d M, Y" }}</p>
                    <p><strong>Estado Civil:</strong> {{ perfil.estadocivil }}</p>
                    <p><strong>Sexo:</strong> {{ perfil.get_sexo_display }}</p>
                    <p class="full-row"><strong>Direcci√≥n domiciliaria:</strong> {{ perfil.direcciondomiciliaria }}</p>
                    {% if perfil.direcciontrabajo %}
                    <p class="full-row"><strong>Direcci√≥n de trabajo:</strong> {{ perfil.direcciontrabajo }}</p>
                    {% endif %}
                </div>
            </div>
        </main>
    </div>
</div>


<!-- =======================
     EXPERIENCIA LABORAL
======================= -->
<div id="experiencia" class="tab-content">
    <div class="timeline-container">
        {% for e in experiencias %}
            <div class="exp-block">
                <div class="timeline-dot"></div>

                <div class="exp-header">
                    <div class="header-main">
                        <h3 class="exp-cargo-title">{{ e.cargo_desempenado|title }}</h3>
                        <span class="exp-period">
                            <strong>Tiempo en el cargo:</strong> 
                            {{ e.fecha_inicio_gestion|date:"j \d\e F \d\e Y" }} - 
                            {% if e.fecha_fin_gestion %}
                                {{ e.fecha_fin_gestion|date:"j \d\e F \d\e Y" }}
                            {% else %}
                                Actualidad
                            {% endif %}
                        </span>
                    </div>
                    
                    <p class="exp-company"><strong>‚è∫ Empresa:</strong> {{ e.nombre_empresa|default:"No especificada" }} | {{ e.lugar_empresa }}</p>
                    
                </div>

                <div class="{% if e.nombre_contacto_empresarial or e.telefono_contacto_empresarial or e.email_empresa or e.sitio_web_empresa %}exp-body-grid{% else %}exp-body-full{% endif %}">
                    
                    <div class="exp-info-main">
                        {% if e.descripcion_funciones %}
                            <p class="body-title">Funciones y Responsabilidades</p>
                            <div class="funciones-content">
                                {{ e.descripcion_funciones|linebreaks }}
                            </div>
                        {% endif %}

                        {% if e.certificado %}
                            <div class="certificado-wrapper">
                                <a href="{{ e.certificado.url }}" target="_blank" class="btn-cert">
                                    
                                    <span>üìÑ</span> Ver Certificado Laboral
                                </a>
                            </div>
                        {% endif %}
                    </div>

                    {% if e.nombre_contacto_empresarial or e.telefono_contacto_empresarial or e.email_empresa or e.sitio_web_empresa %}
                    <div class="exp-contacto-card">
                        <p class="contact-subtitle">Referencia Laboral</p>
                        <div class="contact-data">
                            {% if e.nombre_contacto_empresarial %}
                                <p><strong>Persona:</strong> {{ e.nombre_contacto_empresarial }}</p>
                            {% endif %}
                            {% if e.telefono_contacto_empresarial %}
                                <p><strong>Tel√©fono:</strong> {{ e.telefono_contacto_empresarial }}</p>
                            {% endif %}
                            {% if e.email_empresa %}
                                <p><strong>Email:</strong> <a href="mailto:{{ e.email_empresa }}" class="cv-link-small">{{ e.email_empresa }}</a></p>
                            {% endif %}
                            
                            {% if e.sitio_web_empresa %}
                                <a href="{{ e.sitio_web_empresa }}" target="_blank" class="btn-web-small">
                                    <span class="icon">
                                    üåê</span> Web Empresa
                                </a>
                            {% endif %}
                        </div>
                    </div>
                    {% endif %}

                </div>
            </div>
        {% empty %}
            <div class="empty-state">
                <p>No hay experiencia registrada a√∫n.</p>
            </div>
        {% endfor %}
    </div>
</div>


<!-- =======================
     CURSOS REALIZADOS
======================= -->

<div id="cursos" class="tab-content">
    <div class="courses-container">
        {% for c in cursos %}
        <div class="curso-block">
            
            <div class="curso-header">
                <div class="header-main">
                    <h3 class="curso-title">{{ c.nombrecurso|title }}</h3>
                    <span class="curso-period">
                        <strong>Periodo:</strong> 
                        {{ c.fechainicio|date:"j \d\e F \d\e Y" }} - 
                        {% if c.fechafin %}{{ c.fechafin|date:"j \d\e F \d\e Y" }}{% else %}Actualidad{% endif %}
                    </span>
                </div>
                
                <div class="curso-meta">
                    {% if c.totalhoras %}
                        <span class="meta-item">‚è± <strong>Duraci√≥n:</strong> {{ c.totalhoras }} horas</span>
                    {% endif %}
                    {% if c.entidadpatrocinadora %}
                        <span class="meta-item">üèõ <strong>Instituci√≥n:</strong> {{ c.entidadpatrocinadora }}</span>
                    {% endif %}
                </div>
            </div>

            <div class="{% if c.nombrecontactoauspicia or c.telefonocontactoauspicia or c.emailempresapatrocinadora %}curso-body-grid{% else %}curso-body-full{% endif %}">
                
                <div class="curso-info-main">
                    {% if c.descripcioncurso %}
                        <p class="body-title">Descripci√≥n del curso</p>
                        <div class="descripcion-content">
                            {{ c.descripcioncurso|linebreaks }}
                        </div>
                    {% endif %}

                    {% if c.certificado %}
                        <div class="certificado-wrapper">
                            <a href="{{ c.certificado.url }}" target="_blank" class="btn-cert">
                                <span>üëÅ</span> Ver Certificado
                            </a>
                        </div>
                    {% endif %}
                </div>

                {% if c.nombrecontactoauspicia or c.telefonocontactoauspicia or c.emailempresapatrocinadora %}
                <div class="curso-contacto-card">
                    <p class="contact-subtitle">Contacto de la Entidad</p>
                    <div class="contact-data">
                        {% if c.nombrecontactoauspicia %}
                            <p><strong>Responsable:</strong> {{ c.nombrecontactoauspicia }}</p>
                        {% endif %}
                        {% if c.telefonocontactoauspicia %}
                            <p><strong>Tel√©fono:</strong> {{ c.telefonocontactoauspicia }}</p>
                        {% endif %}
                        {% if c.emailempresapatrocinadora %}
                            <p><strong>Email:</strong> <a href="mailto:{{ c.emailempresapatrocinadora }}" class="cv-link-small">{{ c.emailempresapatrocinadora }}</a></p>
                        {% endif %}
                    </div>
                </div>
                {% endif %}

            </div>
        </div>
        {% empty %}
        <div class="empty-state">
            <p>No hay cursos registrados a√∫n.</p>
        </div>
        {% endfor %}
    </div>
</div>



<!-- =======================
     RECONOCIMIENTOS
======================= -->

<div id="reconocimientos" class="tab-content">
    <div class="recon-container">
        {% if reconocimientos %}
            {% for r in reconocimientos %}
                <div class="recon-block">
                    
                    <div class="recon-header-main">
                        <div class="header-info">
                            <h3 class="recon-type-title">ñ§ê {{ r.tiporeconocimiento|title }}</h3>
                            <span class="recon-date-badge">
                                ùÑú {{ r.fechareconocimiento|date:"j \d\e F \d\e Y" }}
                            </span>
                        </div>
                        {% if r.entidadpatrocinadora %}
                            <p class="recon-entity-name"><strong>Otorgado por:</strong> {{ r.entidadpatrocinadora }}</p>
                        {% endif %}
                    </div>

                    <div class="{% if r.nombrecontactoauspicia or r.telefonocontactoauspicia %}recon-body-grid{% else %}recon-body-full{% endif %}">
                        
                        <div class="recon-info-main">
                            <p class="body-title">Detalles del Reconocimiento</p>
                            <div class="recon-text">
                                {{ r.descripcionreconocimiento|linebreaks }}
                            </div>

                            {% if r.certificado %}
                                <div class="certificado-wrapper">
                                    <a href="{{ r.certificado.url }}" target="_blank" class="btn-cert">
                                        <span>üëÅ</span> Ver Certificado 
                                    </a>
                                </div>
                            {% endif %}
                        </div>

                        {% if r.nombrecontactoauspicia or r.telefonocontactoauspicia %}
                        <div class="recon-contacto-card">
                            <p class="contact-subtitle">Referencia de Validaci√≥n</p>
                            <div class="contact-data">
                                {% if r.nombrecontactoauspicia %}
                                    <p><strong>Contacto:</strong> {{ r.nombrecontactoauspicia }}</p>
                                {% endif %}
                                {% if r.telefonocontactoauspicia %}
                                    <p><strong>Tel√©fono:</strong> {{ r.telefonocontactoauspicia }}</p>
                                {% endif %}
                            </div>
                        </div>
                        {% endif %}

                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="empty-state">
                <p>No hay reconocimientos registrados en tu perfil a√∫n.</p>
            </div>
        {% endif %}
    </div>
</div>




<!-- =======================
     PRODUCTOS ACAD√âMICOS
======================= -->
<div id="prod_acad" class="tab-content">
    <div class="prod-grid">
        {% if productos_academicos %}
            {% for p in productos_academicos %}
                <div class="prod-card-premium">
                    
                    {% if p.imagen %}
                    <div class="prod-visual">
                        <!-- Aqu√≠ envolvemos la imagen con un enlace -->
                        <a href="{{ p.imagen.url }}" target="_blank">
                            <img src="{{ p.imagen.url }}" alt="{{ p.nombrerecurso }}">
                            <div class="prod-overlay">
                                <span>Click para ampliar</span>
                            </div>
                        </a>
                    </div>
                    {% endif %}

                    <div class="prod-details">
                        <div class="prod-header-row">
                            <span class="prod-category-tag">{{ p.clasificador }}</span>
                            <h3 class="prod-title-text">{{ p.nombrerecurso|title }}</h3>
                        </div>

                        <div class="prod-divider"></div>

                        <div class="prod-body">
                            <p class="prod-label">Descripci√≥n:</p>
                            <div class="prod-description-scroll">
                                {{ p.descripcion|linebreaksbr }}
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="empty-state">
                <p>No hay productos acad√©micos registrados a√∫n.</p>
            </div>
        {% endif %}
    </div>
</div>




<!-- =======================
     PRODUCTOS LABORALES
======================= -->

<div id="prod_lab" class="tab-content">
    <div class="prod-grid"> {% if productos_laborales %}
            {% for p in productos_laborales %}
                <div class="lab-item-modern">
                    
                    <div class="lab-header-flex">
                        <div class="lab-title-group">
                            <span class="lab-type-tag">{{ p.tipoproducto|default:"Producto Laboral" }}</span>
                            <h3 class="lab-main-title">{{ p.nombreproducto }}</h3>
                        </div>
                        
                        {% if p.fecha_producto %}
                        <div class="lab-date-box">
                            <span class="icon">ùÑú</span>
                            <span class="date-text">{{ p.fecha_producto|date:"F, Y" }}</span>
                        </div>
                        {% endif %}
                    </div>

                    {% if p.descripcion %}
                    <div class="lab-content-body">
                        <div class="lab-desc-container">
                            <p class="lab-label">Descripci√≥n del Proyecto / Producto</p>
                            <div class="lab-text">
                                {{ p.descripcion|linebreaksbr }}
                            </div>
                        </div>
                    </div>
                    {% endif %}

                </div>
            {% endfor %}
        {% else %}
            <div class="empty-state">
                <p>No hay productos laborales registrados a√∫n.</p>
            </div>
        {% endif %}
    </div>
</div>









<!-- =======================
     VENTA GARAGE
======================= -->

<div id="venta" class="tab-content">
    <div class="prod-grid"> 
        {% if ventas %}
            {% for v in ventas %}
                <div class="prod-card-premium">
                    
                    {% if v.imagen %}
                    <div class="prod-visual">
                        <a href="{{ v.imagen.url }}" target="_blank">
                            <img src="{{ v.imagen.url }}" alt="{{ v.nombreproducto }}">
                            <div class="prod-overlay">
                                <span>Click para ampliar</span>
                            </div>
                        </a>
                    </div>
                    {% endif %}

                    <div class="prod-details">
                        <div class="prod-header-row">
                            <span class="prod-category-tag">${{ v.valordelbien }}</span>
                            <h3 class="prod-title-text">{{ v.nombreproducto|title }}</h3>
                        </div>

                        <div class="prod-divider"></div>

                        <div class="prod-body">
                            <p class="prod-label">Estado: <strong>{{ v.estadoproducto|default:"Disponible" }}</strong></p>
                            <div class="prod-description-scroll">
                                {{ v.descripcion|linebreaksbr }}
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="empty-state">
                <p>No hay productos registrados en la venta de garage actualmente.</p>
            </div>
        {% endif %}
    </div>
</div>

{% endblock %}