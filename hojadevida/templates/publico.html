{% extends "base_publico.html" %}

{% block contenido %}

<!-- ---------- BOTONES / PESTAAS ---------- -->
<div class="tabs">
    <button id="btn-inicio" class="tab-button active" onclick="mostrarTab('inicio')">Inicio</button>
    <button id="btn-datos" class="tab-button" onclick="mostrarTab('datos')">Datos personales</button>
    <button id="btn-experiencia" class="tab-button" onclick="mostrarTab('experiencia')">Experiencia</button>
    <button id="btn-cursos" class="tab-button" onclick="mostrarTab('cursos')">Cursos</button>
    <button id="btn-reconocimientos" class="tab-button" onclick="mostrarTab('reconocimientos')">Reconocimientos</button>
    <button id="btn-prod_acad" class="tab-button" onclick="mostrarTab('prod_acad')">Productos acad茅micos</button>
    <button id="btn-prod_lab" class="tab-button" onclick="mostrarTab('prod_lab')">Productos laborales</button>
    <button id="btn-venta" class="tab-button" onclick="mostrarTab('venta')">Venta garage</button>
</div>

<!-- =======================
     PESTAA DE INICIO
======================= -->
<div id="inicio" class="tab-content active">
    <div class="intro-container">
        <h1 class="intro-title">Bienvenido/a</h1>
        {% if perfil.texto_inicio %}
            <p class="intro-subtitle">{{ perfil.texto_inicio|linebreaks }}</p>
        {% else %}
            <p class="intro-subtitle">Gracias por visitar mi hoja de vida digital.</p>
        {% endif %}
        <a href="#datos" class="btn-vermas" onclick="mostrarTab('datos')">Ver m谩s</a>
    </div>
</div>

<!-- =======================
     DATOS PERSONALES
======================= -->
<div id="datos" class="tab-content">
    <div class="resume-grid">
        
        <!-- ===== SIDEBAR: Contacto / Identificaci贸n ===== -->
        <aside class="resume-sidebar">
            {% if perfil.foto_perfil %}
                <div class="perfil-foto-container">
                    <img src="{{ perfil.foto_perfil.url }}" alt="Foto de perfil" class="perfil-foto">
                </div>
            {% endif %}
            <h2 class="section-title-sm">Contacto</h2>
            
            {% if perfil.lugarnacimiento %}
            <div class="contact-item">
                <span class="icon"></span>
                <p><strong>Ubicaci贸n</strong><br>{{ perfil.lugarnacimiento }}</p>
            </div>
            {% endif %}

            {% if perfil.telefonoconvencional %}
            <div class="contact-item">
                <span class="icon"></span>
                <p><strong>Tel茅fono</strong><br>{{ perfil.telefonoconvencional }}</p>
            </div>
            {% endif %}

            {% if perfil.sitioweb %}
            <div class="contact-item">
                <span class="icon"></span>
                <p><strong>Sitio Web</strong><br><a href="{{ perfil.sitioweb }}" target="_blank">Visitar sitio</a></p>
            </div>
            {% endif %}

            {% if perfil.numerocedula %}
            <div class="contact-item">
                <span class="icon"></span>
                <p><strong>Identificaci贸n</strong><br>{{ perfil.numerocedula }}</p>
            </div>
            {% endif %}

            <div class="contact-item">
                <span class="icon"></span>
                <p><strong>Licencia</strong><br>{{ perfil.licenciaconducir|default:"No dispone" }}</p>
            </div>
        </aside>

        <!-- ===== MAIN: Datos personales completos (texto limpio) ===== -->
        <main class="resume-main">
            <!-- Nombre completo y tipo de perfil -->
            <h2 class="intro-title" style="font-size: 2.5rem; text-align: left;">
                {{ perfil.nombres }} {{ perfil.apellidos }}
            </h2>
            {% if perfil.get_perfilactivo_display %}
            <p class="perfil-tag">{{ perfil.get_perfilactivo_display }}</p>
            {% endif %}

            <!-- Descripci贸n profesional -->
            <div class="resume-section">

                {% if perfil.descripcionperfil %}
                    <p>{{ perfil.descripcionperfil|linebreaks }}</p>
                {% else %}
                    <p>Sin descripci贸n disponible.</p>
                {% endif %}
            </div>

            <!-- Informaci贸n personal simple (sin tarjetas) -->
            <div class="resume-section">
                {% if perfil.nacionalidad %}
                    <p><strong>Nacionalidad:</strong> {{ perfil.nacionalidad }}</p>
                {% endif %}
                {% if perfil.fechanacimiento %}
                    <p><strong>Fecha de nacimiento:</strong> {{ perfil.fechanacimiento }}</p>
                {% endif %}
                {% if perfil.get_sexo_display %}
                    <p><strong>Sexo:</strong> {{ perfil.get_sexo_display }}</p>
                {% endif %}
                {% if perfil.estadocivil %}
                    <p><strong>Estado civil:</strong> {{ perfil.estadocivil }}</p>
                {% endif %}
                {% if perfil.direcciondomiciliaria %}
                    <p><strong>Direcci贸n domiciliaria:</strong> {{ perfil.direcciondomiciliaria }}</p>
                {% endif %}
                {% if perfil.direcciontrabajo %}
                    <p><strong>Direcci贸n trabajo:</strong> {{ perfil.direcciontrabajo }}</p>
                {% endif %}
            </div>
        </main>
    </div>
</div>


<!-- =======================
     EXPERIENCIA LABORAL
======================= -->

<div id="experiencia" class="tab-content">
    <h2 class="section-title">Experiencia Laboral</h2>

    {% for e in experiencias %}
        <div class="exp-block">

            <!-- Cabecera -->
            <div class="exp-header">
                <h3 class="exp-cargo-title">{{ e.cargo_desempenado|title }}</h3>
                {% if e.nombre_empresa %}
                    <p><strong>Empresa:</strong> {{ e.nombre_empresa }}</p>
                {% endif %}
                {% if e.lugar_empresa %}
                    <p><strong>Lugar:</strong> {{ e.lugar_empresa }}</p>
                {% endif %}
                <p><strong>Periodo de trabajo:</strong>
                    {{ e.fecha_inicio_gestion }}
                    {% if e.fecha_fin_gestion %} - {{ e.fecha_fin_gestion }}{% else %} - Actualidad{% endif %}
                </p>
            </div>

            <!-- Cuerpo: funciones + contacto -->
            <div class="exp-body">
                
                <!-- Funciones (lado izquierdo) -->
                {% if e.descripcion_funciones %}
                    <div class="exp-funciones">
                        <p class="body-title"> Funciones y Responsabilidades</p>
                        <div class="funciones-content">
                            {{ e.descripcion_funciones|linebreaksbr }}
                        </div>

                        <!-- BOTN DE CERTIFICADO debajo de funciones -->
                        {% if e.certificado %}
                            <div class="curso-certificado">
                                <a href="{{ e.certificado.url }}" target="_blank" class="btn-cert">
                                     Ver Certificado
                                </a>

                            </div>
                        {% endif %}


                    </div>
                {% endif %}

                <!-- Contacto (lado derecho) -->
                <div class="exp-contacto-box">
                    <p class="contact-subtitle"> Informaci贸n de contacto de la empresa</p>
                    <div class="contact-data">
                        {% if e.nombre_contacto_empresarial %}
                            <p><strong>Contacto:</strong> {{ e.nombre_contacto_empresarial }}</p>
                        {% endif %}
                        {% if e.telefono_contacto_empresarial %}
                            <p><strong>Tel茅fono:</strong> {{ e.telefono_contacto_empresarial }}</p>
                        {% endif %}
                        {% if e.email_empresa %}
                            <p><strong>Email:</strong> <a href="mailto:{{ e.email_empresa }}">{{ e.email_empresa }}</a></p>
                        {% endif %}
                        
                        {% if e.sitio_web_empresa %}
                            <div class="contact-web-wrapper">
                                <a href="{{ e.sitio_web_empresa }}" target="_blank" class="btn-link-inside"> Visitar Sitio Web</a>
                            </div>
                        {% endif %}
                    </div>
                </div>

            </div> <!-- fin exp-body -->

        </div>
    {% empty %}
        <p>No hay experiencia registrada</p>
    {% endfor %}
</div>



<!-- =======================
     CURSOS REALIZADOS
======================= -->

<div id="cursos" class="tab-content">
    <h2>Cursos Realizados</h2>

    {% for c in cursos %}
    <div class="curso-block">

        <!-- Cabecera del curso -->
        <div class="curso-header">
            {% if c.nombrecurso %}
                <h3 class="curso-title">{{ c.nombrecurso }}</h3>
            {% endif %}
            {% if c.totalhoras %}
                <p><strong>Total de horas:</strong> {{ c.totalhoras }}</p>
            {% endif %}

            <p><strong>Periodo:</strong> {{ c.fechainicio }}{% if c.fechafin %} - {{ c.fechafin }}{% else %} - Actualidad{% endif %}</p>

        </div>

        <!-- Cuerpo lado a lado: descripci贸n y entidad -->
        <div class="curso-body-vertical">

            <!-- Descripci贸n -->
            <div class="curso-descripcion">
                <p class="body-title">  Descripci贸n del curso</p>
                <div class="descripcion-content">
                    {{ c.descripcioncurso|linebreaksbr }}
                </div>

    
                {% if c.certificado %}
                <div class="curso-certificado">
                    <a href="{{ c.certificado.url }}" target="_blank" class="btn-cert">
                         Ver Certificado
                    </a>
                </div>
                {% endif %}

            </div>

            <!-- L铆nea divisoria vertical -->
            <div class="info-divider-vertical"></div>

            <!-- Informaci贸n de la entidad -->
            <div class="curso-contacto">
                <p class="contact-subtitle">Informaci贸n de la entidad</p>
                <ul class="contact-data">
                    {% if c.entidadpatrocinadora %}
                        <li><strong>Entidad patrocinadora:</strong> {{ c.entidadpatrocinadora }}</li>
                    {% endif %}
                    {% if c.nombrecontactoauspicia %}
                        <li><strong>Contacto:</strong> {{ c.nombrecontactoauspicia }}</li>
                    {% endif %}
                    {% if c.telefonocontactoauspicia %}
                        <li><strong>Tel茅fono:</strong> {{ c.telefonocontactoauspicia }}</li>
                    {% endif %}
                    {% if c.emailempresapatrocinadora %}
                        <li>
                            <strong>Email:</strong>
                            <a href="mailto:{{ c.emailempresapatrocinadora }}">
                                {{ c.emailempresapatrocinadora }}
                            </a>
                        </li>
                    {% endif %}
                </ul>

            </div>

        </div>

    </div>
    {% empty %}
    <p>No hay cursos registrados</p>
    {% endfor %}
</div>




<!-- =======================
     RECONOCIMIENTOS
======================= -->


<div id="reconocimientos" class="tab-content">
    <h2>Reconocimientos</h2>

    {% if reconocimientos %}
        {% for r in reconocimientos %}
            <div class="recon-block">

                <!-- Cabecera: tipo y fecha -->
                <div class="recon-header">
                    <p><strong>Tipo de reconocimiento:</strong> {{ r.tiporeconocimiento }}</p>
                    <p><strong>Fecha:</strong> {{ r.fechareconocimiento }}</p>
                </div>

                <!-- Descripci贸n -->
                <div class="recon-desc">
                    <p class="recon-subtitle circular descripcion">Descripci贸n del reconocimiento</p>
                    <p class="recon-text">{{ r.descripcionreconocimiento|linebreaksbr }}</p>
                </div>

                <!-- Informaci贸n de la entidad patrocinadora -->
                <div class="recon-info">
                    <p class="recon-subtitle circular entidad">Informaci贸n de la entidad</p>

                    <ul class="recon-entity-list">
                        {% if r.entidadpatrocinadora %}
                            <li><strong>Entidad patrocinadora:</strong> {{ r.entidadpatrocinadora }}</li>
                        {% endif %}
                        {% if r.nombrecontactoauspicia %}
                            <li><strong>Contacto:</strong> {{ r.nombrecontactoauspicia }}</li>
                        {% endif %}
                        {% if r.telefonocontactoauspicia %}
                            <li><strong>Tel茅fono:</strong> {{ r.telefonocontactoauspicia }}</li>
                        {% endif %}
                    </ul>
                </div>

                

                <!-- Bot贸n de certificado -->
                {% if r.certificado %}
                    <div class="recon-certificado">
                        <a href="{{ r.certificado.url }}" target="_blank" class="btn-cert">
                             Ver Certificado
                        </a>
                    </div>
                {% endif %}


            </div>
        {% endfor %}
    {% else %}
        <p class="no-data">No hay reconocimientos registrados</p>
    {% endif %}
</div>





<!-- =======================
     PRODUCTOS ACADMICOS
======================= -->
<div id="prod_acad" class="tab-content">
    <h2>Productos Acad茅micos</h2>

    {% if productos_academicos %}
        {% for p in productos_academicos %}
            <div class="prod-acad-block">

                <div class="prod-col">
                    <p class="prod-title rounded">Nombre del recurso</p>
                    <p class="prod-text">{{ p.nombrerecurso }}</p>
                </div>

                <div class="prod-col">
                    <p class="prod-title rounded">Clasificador</p>
                    <p class="prod-text">{{ p.clasificador }}</p>
                </div>

                <div class="prod-col">
                    <p class="prod-title rounded">Descripci贸n</p>
                    <p class="prod-text">{{ p.descripcion }}</p>
                </div>

            </div>
        {% endfor %}
    {% else %}
        <p class="no-data">No hay productos acad茅micos registrados</p>
    {% endif %}
</div>

<!-- =======================
     PRODUCTOS LABORALES
======================= -->

<div id="prod_lab" class="tab-content">
    <h2 class="section-title">Productos Laborales</h2>

    {% if productos_laborales %}
        {% for p in productos_laborales %}
            <div class="prod-lab-block">  <!-- Bloque grande que encierra todo -->

                <!-- Informaci贸n principal (lado izquierdo) -->
                <div class="prod-lab-info">
                    {% if p.nombreproducto %}
                        <p class="prod-title rounded small pink">Nombre del producto</p>
                        <p class="prod-text">{{ p.nombreproducto }}</p>
                    {% endif %}

                    {% if p.fecha_producto %}
                        <p class="prod-title rounded small pink">Fecha</p>
                        <p class="prod-text">{{ p.fecha_producto|date:"d/m/Y" }}</p>
                    {% endif %}

                    {% if p.tipoproducto %}
                        <p class="prod-title rounded small pink">Tipo</p>
                        <p class="prod-text">{{ p.tipoproducto }}</p>
                    {% endif %}
                </div>

                <!-- Descripci贸n en un recuadro grande -->
                {% if p.descripcion %}
                <div class="prod-lab-desc-box">
                    <p class="desc-subtitle">Descripci贸n</p>  <!-- Subt铆tulo sin recuadro -->
                    <hr class="desc-divider">
                    <p class="prod-text">{{ p.descripcion|linebreaksbr }}</p>
                </div>
                {% endif %}

            </div> <!-- fin bloque grande -->
        {% endfor %}
    {% else %}
        <p class="no-data">No hay productos laborales registrados</p>
    {% endif %}
</div>


<!-- =======================
     VENTA GARAGE
======================= -->

<div id="venta" class="tab-content">
    <h2 class="section-title">Venta Garage</h2>

    {% if ventas %}
        <div class="venta-grid">
            {% for v in ventas %}
                <div class="venta-block">

                    <!-- Informaci贸n principal (vi帽etas) -->
                    <ul class="venta-info">
                        {% if v.nombreproducto %}
                            <li><strong>Nombre del producto:</strong> {{ v.nombreproducto }}</li>
                        {% endif %}
                        {% if v.estadoproducto %}
                            <li><strong>Estado:</strong> {{ v.estadoproducto }}</li>
                        {% endif %}
                        {% if v.valordelbien %}
                            <li><strong>Valor:</strong> ${{ v.valordelbien }}</li>
                        {% endif %}
                    </ul>

                    <!-- Descripci贸n -->
                    {% if v.descripcion %}
                    <div class="venta-desc-box">
                        <p class="desc-subtitle">Descripci贸n</p>
                        <hr class="desc-divider">
                        <p class="venta-text">{{ v.descripcion|linebreaksbr }}</p>
                    </div>
                    {% endif %}

                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="no-data">No hay productos en venta</p>
    {% endif %}
</div>


{% endblock %}